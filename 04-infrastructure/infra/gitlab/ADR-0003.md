# ADR-0003 – Arquitetura do GitLab CI

## Status

Aprovado.

## Contexto

O projeto necessita de uma solução de CI/CD self-hosted integrada ao cluster Kubernetes e ao Harbor.

**As opções avaliadas foram:**

1. GitLab CE completo dentro do Kubernetes;
2. GitLab CE em VM dedicada + Runner no Kubernetes.

---

## Decisão

Optou-se por:

GitLab CE instalado em VM Ubuntu 24 dedicada;
GitLab Runner executando dentro do cluster Kubernetes.

---

## Justificativa

1. Separação de responsabilidades;
2. Melhor isolamento de recursos;
3. Facilidade de backup e manutenção do GitLab;
4. Arquitetura mais próxima de ambientes enterprise reais;
5. Escalabilidade independente do cluster de workloads.

---

## Consequências

### Positivas

- Arquitetura modular;
- Melhor organização da infraestrutura;
- Maior previsibilidade de consumo de recursos;
- Facilita troubleshooting.

### Negativas

- Necessidade de gerenciar uma VM adicional;
- Maior complexidade inicial.

---

## Próximos Passos

- Integrar pipeline com Harbor;
- Implementar pipeline de deploy via Helm;
- Avaliar futura implementação de GitOps (ArgoCD ou Flux).

---

Autor: Robson Ferreira  
Projeto: self-hosted-devops-enterprise-architecture